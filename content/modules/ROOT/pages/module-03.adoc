:imagesdir: ../assets/images/m3
== Module 3: The Review Summary Agentic App

Objective: Build and deploy the second agent, focused on data analysis and dynamic content generation via LLMs.

== User flow:

Here is an overview of the user flow:

image:review-summary-diagram.png[Review Processor Agent Diagram]

* The Review Summary Agent listens to the `review-processed` Kafka topic for events published by the Review Processor Agent.
* The agent fetched all existing reviews for the corresponding product from MongoDB.
* It applies an algorithm to determine if a new, consolidated summary needs to be generated. +

NOTE: Algorithm example: If the total number of reviews less 3, the summarization process is skipped.

* If a new summary is required, the agent invokes the LLM via LangChain4j to generate a new product summary based on the existing reviews.
* The newly generated summary is then persisted back in MongoDB, updating the product information.

== Activity walk through:



Technical Context:

This agent is also implemented with Quarkus and uses LangChain4j for a simpler LLM interaction. It demonstrates how event-driven processing (consuming from the review-processed topic) can trigger complex logic. The use of Kafka ensures that the summarizer is decoupled from the processor and is resilient to transient issues or load spikes in the overall system.

Steps and Instructions:
Examine Summary App Project: Review the Quarkus source code for the review-summary service.
Identify Kafka Consumer: Locate the code consuming processed events from the review-processed Kafka topic.
Analyze Summary Logic: Review the code for the decision-making process:
Retrieve all existing reviews for the product from MongoDB.
Apply the rule set/algorithm to decide if a new, consolidated summary must be created.
Implement LLM Call: Ensure the LangChain4j invocation correctly prompts the LLM to generate a new, consolidated product summary based on the collection of existing reviews.
Build and Deploy: Build the Quarkus application and deploy the review-summary service to OpenShift.